importLinkfrom"next/link";importImage,{typeStaticImageData}from"next/image";import{motion,typeMotionProps}from"framer-motion";importclsxfrom"clsx";import*asReactfrom"react";/**BookCard*-Acceptsstring|StaticImageData|nullforcoverImage*-GracefulfallbacktoDEFAULT_COVERonloaderror*-Accessible,keyboard-friendly(primaryfocusontitlelink)*-Brand-consistenttokens(softGold/forest/cream/lightGrey)*exporttypeBookCardProps={slug:string;//"my-book"or"/books/my-book"title:string;author:string;excerpt:string;coverImage?:string|StaticImageData|null;buyLink?:string|null;genre:string;downloadPdf?:string|null;downloadEpub?:string|null;featured?:boolean;className?:string;motionProps?:MotionProps;};constDEFAULT_COVER="/assets/images/default-book.jpg";constisValidLink=(link?:string|null):linkisstring=>!!link&&link.trim()!==""&&link.trim()!=="#";exportdefaultfunctionBookCard({slug,title,author,excerpt,coverImage,buyLink,genre,downloadPdf,downloadEpub,featured=false,className="",motionProps={},}:BookCardProps){//CanonicaldetailURLconstdetailHref=slug.startsWith("/")?slug:`/books/${slug}`;//Initialcoverchoice(preferprovided)constinitialSrc:string|StaticImageData=(coverImage&&(typeofcoverImage==="string"?coverImage.trim():coverImage))||DEFAULT_COVER;//Runtimecoverfallbackonerrorconst[imgSrc,setImgSrc]=React.useState<string|StaticImageData>(initialSrc);return(<motion.article{...motionProps}className={clsx("groupoverflow-hiddenrounded-2xlborderborder-lightGreybg-whiteshadow-cardtransition-allhover:shadow-cardHover","focus-within:ring-1focus-within:ring-softGold/50",featured&&"ring-1ring-softGold/30",className)}>{/*Imagewrapperlinkisaria-hiddensothetitlelinkremainsprimaryfocustarget*/}<Linkhref={detailHref}prefetch={false}className="blockrelativew-full"tabIndex={-1}aria-hidden="true">{/*2:3coverframe*/}<divclassName="relativew-fullaspect-[2/3]"><Imagesrc={imgSrc}alt={`${title}bookcover`}fillsizes="(max-width:768px)100vw,(max-width:1200px)33vw,300px"className="object-covertransition-transformduration-500group-hover:scale-[1.02]"onError={()=>{if(typeofimgSrc==="string"&&imgSrc!==DEFAULT_COVER)setImgSrc(DEFAULT_COVER);}}priority={featured}/></div>{featured&&(<spanclassName="absolutetop-4left-4rounded-fullbg-softGoldpx-3py-1text-xsfont-semiboldtext-deepCharcoalshadow">Featured<spanclassName="sr-only">book</span></span>)}</Link><divclassName="p-6"><h3className="font-seriftext-xlfont-semiboldtext-deepCharcoal"><Linkhref={detailHref}prefetch={false}className="underlinedecoration-softGold/0underline-offset-[6px]transitionhover:decoration-softGold/70">{title}</Link></h3><pclassName="mt-1text-smtext-[color:var(--color-on-secondary)/0.7]">By{author}</p><pclassName="mt-3line-clamp-3text-smleading-relaxedtext-[color:var(--color-on-secondary)/0.9]">{excerpt}</p><divclassName="mt-4flexflex-wrapitems-centergap-3">{/*Genrechip*/}<spanclassName="inline-flexrounded-fullborderborder-lightGreypx-2.5py-1text-xstext-[color:var(--color-on-secondary)/0.7]">{genre||"Uncategorized"}</span>{/*Primary:Learnmore*/}<Linkhref={detailHref}prefetch={false}className="ml-autoinline-flexitems-centerrounded-fullbg-forestpx-4py-2text-xsfont-semiboldtext-creamtransitionhover:bg-[color:var(--color-primary)/0.9]">Learnmore</Link>{/*Secondary:Buy*/}{isValidLink(buyLink)&&(<ahref={buyLink}target="_blank"rel="noopenernoreferrer"className="inline-flexitems-centerrounded-fullborderborder-[color:var(--color-primary)/0.25]px-4py-2text-xsfont-semiboldtext-foresttransitionhover:bg-foresthover:text-cream"aria-label={`Buy${title}(opensinnewtab)`}>Buy</a>)}</div>{/*Tertiary:Downloads*/}{(isValidLink(downloadPdf)||isValidLink(downloadEpub))&&(<divclassName="mt-3flexflex-wrapgap-4text-xs">{isValidLink(downloadPdf)&&(<ahref={downloadPdf}target="_blank"rel="noopenernoreferrer"className="luxury-link">PDF</a>)}{isValidLink(downloadEpub)&&(<ahref={downloadEpub}target="_blank"rel="noopenernoreferrer"className="luxury-link">EPUB</a>)}</div>)}</div></motion.article>);}
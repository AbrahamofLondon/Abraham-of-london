//components/EmailSignup.tsximportReact,{useState}from "react";constEmailSignup:React.FC=()=>{const[email,setEmail]=useState("");const[status,setStatus]=useState<"initial"|"submitting"|"success"|"error">("initial");const[message,setMessage]=useState("");consthandleSubmit=async(e:React.FormEvent)=>{e.preventDefault();if(!email.trim())return;setStatus("submitting");setMessage("");try{constres=awaitfetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email.trim()}),});constdata=awaitres.json();if(!res.ok)thrownewError(data?.message||"Subscriptionfailed");setStatus("success");setMessage("Thankyouforsubscribing!");setEmail("");}catch(err:any){setStatus("error");setMessage(err?.message||"Therewasanerror.Pleasetryagain.");}};return(<section className="bg-emerald-50py-16"><div className="containermx-autopx-4max-w-2xltext-center"><h2 className="text-3xlfont-boldtext-deepCharcoalmb-4">JointheLegacyCircle</h2><p className="text-[color:var(--color-on-secondary)/0.8]mb-6">Subscribetoreceiveexclusiveinsights,fatherhoodwisdom,andbookupdates.</p>{status==="success"?(<p className="text-green-700text-lgfont-medium"role="status"aria-live="polite">{message||"Thankyouforsubscribing!"}</p>):(<form onSubmit={handleSubmit}className="flexflex-colsm:flex-rowgap-4justify-center"aria-label="Emailsubscriptionform"noValidate><labelhtmlFor="email-signup"className="sr-only">Emailaddress</label><inputi d="email-signup"type="email"value={email}onChange={(e)=>setEmail(e.target.value)}required className="w-fullsm:w-autopx-6py-3rounded-fullborderborder-lightGreytext-deepCharcoalplaceholder:text-[color:var(--color-on-secondary)/0.6]focus:outline-nonefocus:ring-2focus:ring-forestfocus:border-forest"placeholder="Enteryouremail"disable d={status==="submitting"}autoComplete="email"aria-inval i d={status==="error"?true:undefined}aria-describedby={message?"email-signup-status":undefined}/><buttontype="submit"className="bg-foresttext-creampx-6py-3rounded-fullfont-semiboldhover:bg-[color:var(--color-primary)/0.9]transitiondisabled:opacity-50"disable d={status==="submitting"}aria-busy={status==="submitting"}>{status==="submitting"?"Subscribing...":"Subscribe"}</button>{status==="error"&&(<pi d="email-signup-status"className="text-red-600sm:mt-0sm:ml-2text-sm"role="alert"aria-live="polite">{message||"Therewasanerror.Pleasetryagain."}</p>)}</form>)}</div></section>);};export defaultEmailSignup;

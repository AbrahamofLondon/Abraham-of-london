//components/PostHero.tsximport*asReactfrom"react";import Imagefrom"next/image";type PostHeroProps={slug:string;title:string;excerpt?:string|null;date?:string|null;author?:string|{name?:string;image?:string}|null;coverImage?:string|null;/**FramingcontrolsfromMDXfront-matter*/coverAspect?:"book"|"wide"|"square";coverFit?:"cover"|"contain";coverPosition?:"center"|"left"|"right";};function normalizeLocal(src?:string|null){if(!src)returnundefined;if(/^https?:\/\//i.test(src))returnundefined;//localonlyforNext/Imagestaticreturnsrc.startsWith("/")?src:`/${src.replace(/^\/+/,"")}`;}/**Samefallbackstrategyasthecardssoslug-onlypostsstilllookgood*/function useCover(slug:string,coverImage?:string|null){constcandidates=React.useMemo(()=>{constlist=[normalizeLocal(coverImage),`/assets/images/blog/${slug}.webp`,`/assets/images/blog/${slug}.jpg`,`/assets/images/blog/${slug}.jpeg`,`/assets/images/blog/${slug}.png`,`/assets/images/blog/default-blog-cover.jpg`,].filter(Boolean)asstring[];returnArray.from(newSet(list));},[slug,coverImage]);const[i,setI]=React.useState(0);const src=candidates[i];const onError=React.useCallback(()=>{setI((x)=>(x+1<candidates.length?x+1:x));},[candidates.length]);return{src,onError};}export defaultfunctionPostHero({slug,title,excerpt,date,author,coverImage,coverAspect="book",coverFit="contain",//defaulttocontainforportraitscoverPosition="center",}:PostHeroProps){const{src:coverSrc,onError}=useCover(slug,coverImage);constauthorName=typeofauthor==="string"?author:author?.name||"AbrahamofLondon";constdt=date?newDate(date):null;constdateStr=dt&&!Number.isNaN(+dt)?newIntl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric",}).format(dt):null;//AspectframeconstaspectClass=coverAspect==="square"?"aspect-[1/1]":coverAspect==="wide"?"aspect-[16/9]":"aspect-[2/3]";//book/portrait//Fit/positionconstfitClass=coverFit==="contain"?"object-contain":"object-cover";constposClass=coverPosition==="left"?"object-left":coverPosition==="right"?"object-right":"object-center";//Addpadding+neutralbackgroundwhenweuse`contain`constframePadding=coverFit==="contain"?"p-2sm:p-3md:p-4":"";constframeBg=coverFit==="contain"?"bg-warmWhite":"bg-transparent";constframeBorder=coverFit==="contain"?"borderborder-lightGrey/70":"borderborder-transparent";return(<section className="bg-whitedark:bg-black"><div className="mx-autogridmax-w-7xlgrid-cols-1items-centergap-8px-4py-12md:grid-cols-2md:gap-12">{/*Textblock*/}<div><p className="mb-3text-xsuppercasetracking-widesttext-[color:var(--color-on-secondary)/0.6]dark:text-[color:var(--color-on-primary)/0.7]">FeaturedInsight</p><h1 className="font-seriftext-4xlfont-semiboldtext-deepCharcoalsm:text-5xldark:text-cream[text-wrap:balance]drop-shadow-[0_1px_0_rgba(0,0,0,.25)]">{title}</h1><div className="mt-3flexflex-wrapitems-centergap-3text-smtext-[color:var(--color-on-secondary)/0.7]dark:text-[color:var(--color-on-primary)/0.8]">{authorName&&<span>By{authorName}</span>}{dateStr&&(<><span aria-hidden>•</span><timedateTime={dt?.toISOString()||undefined}>{dateStr}</time></>)}</div>{excerpt&&(<p className="mt-5max-w-prosetext-[color:var(--color-on-secondary)/0.8]dark:text-[color:var(--color-on-primary)/0.85]">{excerpt}</p>)}</div>{/*Imageblock*/}{coverSrc&&(<div className={`relativew-fulloverflow-hiddenrounded-2xl${aspectClass}${frameBg}${framePadding}${frameBorder}shadow-card`}>{/*softreadabilityoverlayforcoverimages*/}{coverFit==="cover"&&(<divaria-hidden className="pointer-events-noneabsoluteinset-0z-[1]bg-[linear-gradient(to_bottom,rgba(0,0,0,0.35),transparent_35%,transparent_65%,rgba(0,0,0,0.25))]dark:bg-[linear-gradient(to_bottom,rgba(0,0,0,0.45),transparent_40%,transparent_60%,rgba(0,0,0,0.35))]"/>)}<Image src={coverSrc}alt={title}fill sizes="(max-width:768px)100vw,50vw"className={`${fitClass}${posClass}`}onError={onError}priority/></div>)}</div></section>);}

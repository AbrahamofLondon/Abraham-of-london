"useclient";type Props={title:string;description:string;isoStart:string;//ISOwithoffsetdurationMins?:number;//default90location:string;url?:string;//canonicaleventURL};export function AddToCalendar({title,description,isoStart,durati onMins=90,location,url}:Props){conststart=newDate(isoStart);consten d=newDate(start.getTime()+durationMins*60_000);constpa d=(n:number)=>String(n).padStart(2,"0");consttoCal=(d:Date)=>`${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;constics=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//AbrahamofLondon//Events//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${crypto?.randomUUID?.()||Math.random().toString(36).slice(2)}`,`DTSTAMP:${toCal(newDate())}`,`DTSTART:${toCal(start)}`,`DTEND:${toCal(end)}`,`SUMMARY:${title}`,`DESCRIPTION:${description.replace(/\n/g,"\\n")}${url?`\\n${url}`:""}`,`LOCATION:${location}`,"END:VEVENT","END:VCALENDAR",].join("\r\n");constblob=newBlob([ics],{type:"text/calendar;charset=utf-8"});const href=typeofwindow!=="undefined"?URL.createObjectURL(blob):"#";//GoogleCalendarlinkconstg=newURL("https://www.google.com/calendar/render");g.searchParams.set("action","TEMPLATE");g.searchParams.set("text",title);g.searchParams.set("details",`${description}${url?`\n${url}`:""}`);g.searchParams.set("location",location);g.searchParams.set("dates",`${toCal(start)}/${toCal(end)}`);return(<div className="mt-4flexgap-3"><adownloa d={`${title.replace(/\s+/g,"-").toLowerCase()}.ics`}href={href}className="rounded-xlborderpx-3py-2text-smfont-medium">AddtoCalendar(.ics)</a><a href={g.toString()}target="_blank"rel="noopener"className="rounded-xlborderpx-3py-2text-smfont-medium">AddtoGoogle</a></div>);}
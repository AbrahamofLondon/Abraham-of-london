// pages/print/[slug].tsx - FINAL CONFLICT RESOLUTION
import { GetStaticPaths, GetStaticProps } from 'next';
import { getAllContent } from '@/lib/mdx'; 
import { useRouter } from 'next/router';

// This component is now a redirecting placeholder to prevent the build crash.
export default function PrintPlaceholder() {
  const router = useRouter();
  // We expect specialized templates (e.g., /print/book/[slug]) to handle rendering.
  // If this fallback is hit, we return a simple 404 or redirect.
  // Since you confirmed the file keeps reappearing, we must simplify its getStaticPaths.
  
  React.useEffect(() => {
    if (router.isReady && router.asPath) {
      // Direct the user to the base download page if the print version is not found
      router.replace(router.asPath.replace('/print/', '/downloads/').toLowerCase());
    }
  }, [router.isReady, router.asPath]);
  
  return null; // Render nothing here to avoid crashing the server component tree
}

// CRITICAL FIX: Ensure this dynamic page generates NO PATHS, forcing the router to use 
// the specific paths defined in /pages/print/book/[slug].tsx, etc.
export const getStaticPaths: GetStaticPaths = async () => {
  return {
    paths: [],
    fallback: false, // Ensure no paths are built by this generic file
  };
};

export const getStaticProps: GetStaticProps = async () => {
  // We do not need to fetch content here; the logic is handled by the specific print pages.
  return { props: {}, revalidate: 60 };
};
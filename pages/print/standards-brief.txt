// pages/print/standards-brief.tsx
import * as React from "react";
import Head from "next/head";
import Image from "next/image";
import Link from "next/link";

/**
 * Standards Brief — 2 pages (A4), leader-ready.
 * Produces a premium PDF that replaces: public/downloads/standards-brief.pdf
 *
 * Render with your existing scripts:
 *   npm run print:serve   # serves on :5555
 *   npm run print:pdfs    # renders /print/* to /public/downloads/*.pdf
 */

function Header({ title, code, page }: { title: string; code: string; page: number }) {
  return (
    <header className="header">
      <div className="brand">
        <div className="logo">
          <Image
            src="/assets/images/logo/abraham-of-london-logo.svg"
            alt="Abraham of London"
            width={180}
            height={42}
            onError={(e) => {
              const img = e.target as HTMLImageElement;
              img.style.display = "none";
              const fallback = (img.parentElement?.querySelector(".fallback") as HTMLElement) || null;
              if (fallback) fallback.style.display = "block";
            }}
          />
          <strong className="fallback" style={{ display: "none" }}>Abraham of London</strong>
        </div>
        <div className="brand-meta">
          <span className="eyebrow">Leadership Standards</span>
          <h1>{title}</h1>
          <p className="subtitle">Non-negotiables that protect people, work, and name.</p>
        </div>
      </div>
      <div className="doc-meta">
        <div><strong>Doc</strong> {code}</div>
        <div><strong>Pages</strong> {page} of 2</div>
        <div><strong>Date</strong> {new Intl.DateTimeFormat("en-GB").format(new Date())}</div>
      </div>
    </header>
  );
}

function Footer() {
  return (
    <footer className="footer">
      <div>© {new Date().getFullYear()} Abraham of London. All rights reserved.</div>
      <div className="muted">
        <Link href="https://www.abrahamoflondon.org" target="_blank" rel="noopener noreferrer">
          abrahamoflondon.org
        </Link>
        <span aria-hidden> • </span>
        <span>Standards protect the work when no one is watching.</span>
      </div>
    </footer>
  );
}

export default function StandardsBrief() {
  return (
    <>
      <Head>
        <title>Standards Brief — Abraham of London (Print)</title>
        <meta name="robots" content="noindex" />
      </Head>

      {/* PAGE 1 */}
      <main className="page">
        <Header title="Standards Brief" code="AOL-SB-2025.10" page={1} />

        <section className="section lede">
          <p>
            These standards are our common floor. They protect people, keep the work clean,
            and make decisions faster—especially under pressure. Leaders are accountable
            for holding the line, teaching the “why,” and modeling the “how.”
          </p>
        </section>

        <section className="section grid-2">
          <div>
            <h2>1) Core Standards</h2>
            <ul className="bullets">
              <li><strong>Presence:</strong> We show up, we’re reachable, we land work on time.</li>
              <li><strong>Integrity:</strong> Facts first, no spin; we correct quietly and fast.</li>
              <li><strong>Clarity:</strong> Plain language; outcomes, owners, deadlines.</li>
              <li><strong>Craft:</strong> We leave things better than we found them—always.</li>
            </ul>

            <h2>2) Decision Ladder</h2>
            <ol className="list">
              <li><strong>Facts:</strong> What’s true right now?</li>
              <li><strong>Judgement:</strong> What matters most (risk/impact/cost)?</li>
              <li><strong>Decision:</strong> What will we do/not do?</li>
              <li><strong>Owner:</strong> Who is responsible?</li>
              <li><strong>Deadline:</strong> When will it land?</li>
            </ol>

            <div className="callout">
              <strong>Rule:</strong> No decision is “done” without <em>owner + deadline</em> in writing.
            </div>
          </div>

          <div>
            <h2>3) Operating Cadence</h2>
            <ul className="bullets">
              <li><strong>Weekly:</strong> team stand-up; priorities, blocks, owners.</li>
              <li><strong>Monthly:</strong> scorecard review; what moved, what stalled, why.</li>
              <li><strong>Quarterly:</strong> 3–5 commitments; stoplist; resourcing.</li>
            </ul>

            <h2>4) Communication Standards</h2>
            <ul className="bullets">
              <li><strong>BLUF:</strong> Bottom Line Up Front—the decision or ask first.</li>
              <li><strong>Subject tags:</strong> <code>[DECISION]</code> <code>[FYI]</code> <code>[ACTION]</code> <code>[BLOCKER]</code>.</li>
              <li><strong>Write once:</strong> 1-pager beats scattered chat; link the doc.</li>
              <li><strong>Latency:</strong> Same-day response on blockers; 24h on routine.</li>
            </ul>

            <h2>5) Meeting Standards</h2>
            <ul className="bullets">
              <li>Agenda, doc link, and reading time in calendar invite.</li>
              <li>Start on time; <strong>Timekeeper</strong> lands outcomes; notes in doc.</li>
              <li>Decisions + owners + dates captured before the room closes.</li>
            </ul>
          </div>
        </section>

        <section className="section grid-2">
          <div>
            <h2>6) People & Culture</h2>
            <ul className="bullets">
              <li><strong>Feedback:</strong> Specific, kind, on time; we coach in private.</li>
              <li><strong>Conflict:</strong> 48-hour rule; go direct, then escalate with one witness.</li>
              <li><strong>Confidentiality:</strong> Stories stay in the room; protect dignity.</li>
            </ul>
          </div>

          <div>
            <h2>Leader’s Quick Checklist</h2>
            <ul className="checklist">
              <li>□ Outcomes, owner, deadline are written.</li>
              <li>□ Risks and assumptions are explicit.</li>
              <li>□ One source of truth linked in the invite.</li>
              <li>□ Follow-ups dated and visible to the team.</li>
            </ul>
          </div>
        </section>

        <Footer />
      </main>

      {/* PAGE 2 */}
      <main className="page">
        <Header title="Standards Brief" code="AOL-SB-2025.10" page={2} />

        <section className="section grid-2">
          <div>
            <h2>7) Workmanship (Definition of Done)</h2>
            <ul className="checklist">
              <li>□ <strong>Intent clear:</strong> who it’s for and what it’s for.</li>
              <li>□ <strong>Constraints respected:</strong> scope, budget, deadline.</li>
              <li>□ <strong>Naming consistent:</strong> files, routes, variables.</li>
              <li>□ <strong>Accessibility:</strong> readable, keyboard-friendly, alt text present.</li>
              <li>□ <strong>Edge-cases:</strong> empty states, errors, slow networks.</li>
              <li>□ <strong>Docs:</strong> 5-line “how to run / operate / maintain.”</li>
              <li>□ <strong>Owner:</strong> a human is on the hook post-merge.</li>
            </ul>

            <h2>8) Security & Privacy</h2>
            <ul className="bullets">
              <li><strong>Default private:</strong> share links intentionally; least privilege.</li>
              <li><strong>Secrets:</strong> env vars only; never in code or screenshots.</li>
              <li><strong>Data classes:</strong> Public / Internal / Sensitive; label docs.</li>
              <li><strong>Incidents:</strong> Declare within same day; freeze changes; write report.</li>
            </ul>
          </div>

          <div>
            <h2>9) Stewardship (Money / Time / Name)</h2>
            <ul className="bullets">
              <li><strong>Money:</strong> frugal by default; clear owner for spend; 2 quotes if &gt; £1k.</li>
              <li><strong>Time:</strong> protect focus; batch admin; cancel low-yield meetings.</li>
              <li><strong>Name:</strong> be worthy of trust—private truth &gt; public image.</li>
            </ul>

            <h2>10) Release Discipline</h2>
            <ul className="checklist">
              <li>□ Ship behind a feature flag if uncertain.</li>
              <li>□ Log changes + rollback plan.</li>
              <li>□ Verify metrics / errors within 24h.</li>
              <li>□ Close the loop: tell the story, credit the team.</li>
            </ul>
          </div>
        </section>

        <section className="section grid-2">
          <div>
            <h2>11) Writing Standards</h2>
            <ul className="bullets">
              <li><strong>One page wins:</strong> exec summary, decision table, next steps.</li>
              <li><strong>Plain English:</strong> no fluff; verbs strong; nouns specific.</li>
              <li><strong>Numbers:</strong> denominators, deltas, and dates (ISO) are explicit.</li>
              <li><strong>Sources:</strong> link evidence; avoid “I feel” unless invited.</li>
            </ul>
          </div>

          <div>
            <h2>12) Review Rhythm</h2>
            <ul className="bullets">
              <li><strong>Monthly:</strong> scorecards; 3 proud, 3 stuck, 3 next.</li>
              <li><strong>Quarterly:</strong> reset the stoplist; realign resources.</li>
              <li><strong>Annually:</strong> archive, distill, publish the best 10 pages.</li>
            </ul>
            <div className="callout">
              <strong>Remember:</strong> Quality rises when we <em>remove</em> more than we add.
            </div>
          </div>
        </section>

        <section className="section">
          <h2>Sign-Off (Optional)</h2>
          <p className="micro">Teams may choose to adopt this brief formally.</p>
          <table className="sig-table" aria-label="Signature lines">
            <tbody>
              <tr>
                <td className="line"><span aria-hidden>_______________________________</span><br /><span className="label">Leader</span></td>
                <td className="line"><span aria-hidden>_______________________________</span><br /><span className="label">Team</span></td>
                <td className="line narrow"><span aria-hidden>______________</span><br /><span className="label">Date</span></td>
              </tr>
            </tbody>
          </table>
        </section>

        <Footer />
      </main>

      {/* Scoped print styles */}
      <style jsx>{`
        :root {
          --ink: #111;
          --muted: #666;
          --rule: #dcdcdc;
          --brand: #bfa364; /* soft gold */
        }
        html, body { background: #f6f6f6; }
        .page {
          width: 210mm;
          min-height: 297mm;
          margin: 10mm auto;
          background: #fff;
          color: var(--ink);
          box-shadow: 0 2mm 6mm rgba(0,0,0,.06);
          padding: 14mm 16mm;
          font: 12.25pt/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }
        .header {
          display: flex; align-items: flex-start; justify-content: space-between;
          border-bottom: 0.5pt solid var(--rule); padding-bottom: 6mm; margin-bottom: 6mm;
        }
        .brand { display: flex; gap: 10mm; align-items: center; }
        .logo { min-width: 40mm; }
        .brand-meta .eyebrow {
          display: inline-block; font-size: 8.5pt; letter-spacing: .12em; text-transform: uppercase;
          padding: 2pt 6pt; border: 0.6pt solid var(--brand); color: var(--brand); border-radius: 12px;
        }
        .brand-meta h1 { font-size: 20pt; line-height: 1.2; margin: 3mm 0 1mm; }
        .subtitle { color: var(--muted); margin: 0; }
        .doc-meta { text-align: right; font-size: 9pt; color: var(--muted); min-width: 44mm; }

        .section { margin: 6mm 0; }
        .lede p { font-size: 12.75pt; margin: 0; }
        h2 { font-size: 14.5pt; margin: 0 0 2mm; }
        .bullets { margin: 0; padding-left: 4.5mm; list-style: disc; }
        .bullets li { margin: .9mm 0; }
        .list { margin: 0; padding-left: 4.5mm; }
        .list li { margin: 1mm 0; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8mm; }
        .callout {
          margin-top: 3mm; border: .7pt solid var(--brand); padding: 3mm 4mm; border-radius: 6px;
          background: #fffdf6;
        }
        .checklist { margin: 0; padding-left: 0; list-style: none; }
        .checklist li::before { content: "□"; margin-right: 4mm; }
        .micro { color: var(--muted); font-size: 9.5pt; margin-top: 0; }

        .sig-table { width: 100%; border-collapse: collapse; margin-top: 3mm; }
        .sig-table td { vertical-align: bottom; padding: 4mm 3mm 0 0; }
        .sig-table td.line { width: 40%; }
        .sig-table td.line.narrow { width: 20%; }
        .sig-table .label { color: var(--muted); font-size: 8.5pt; }

        .footer {
          border-top: 0.5pt solid var(--rule); margin-top: 8mm; padding-top: 4mm;
          display: flex; align-items: center; justify-content: space-between; font-size: 9.75pt;
        }
        .muted { color: var(--muted); }

        @media print {
          html, body { background: #fff; }
          .page { margin: 0; box-shadow: none; break-after: page; }
          .page:last-of-type { break-after: auto; }
          @page { size: A4; margin: 12mm 14mm; }
          a { color: inherit; text-decoration: none; }
          code { background: none; padding: 0; }
        }
      `}</style>
    </>
  );
}

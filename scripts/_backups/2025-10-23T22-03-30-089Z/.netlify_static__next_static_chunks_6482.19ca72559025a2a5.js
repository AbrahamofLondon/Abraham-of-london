"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6482],{6482:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r,s=n(5893),a=n(7294),o=n(1163),i=n(4155);let l="https://utteranc.es",c="iframe.utterances-frame",u=null!==(r=i.env.NEXT_PUBLIC_UTTERANCES_REPO)&&void 0!==r?r:"AbrahamofLondon/abrahamoflondon-comments";function d(e){let{repo:t=u,issueTerm:n="pathname",label:r,useClassDarkMode:i=!0,rootMargin:d="200px",threshold:m=.1,className:h,timeoutMs:f=1e4,pollMs:v=250}=e,p=(0,o.useRouter)(),b=a.useRef(null),[w,E]=a.useState(!0),[x,C]=a.useState(null),[L,g]=a.useState(!1),y=a.useMemo(()=>/^[^/]+\/[^/]+$/.test(t),[t]),k=a.useCallback(()=>"undefined"==typeof document?"preferred-color-scheme":i?document.documentElement.classList.contains("dark")?"github-dark":"github-light":"preferred-color-scheme",[i]),N=a.useCallback(e=>{try{var t,n;let r=null===(t=b.current)||void 0===t?void 0:t.querySelector(c);null==r||null===(n=r.contentWindow)||void 0===n||n.postMessage({type:"set-theme",theme:e},l)}catch(e){}},[]),j=a.useCallback(e=>{if(!e)return()=>{};if(!y)return C('Invalid "repo" format. Use "owner/repo", e.g. "AbrahamofLondon/abrahamoflondon-comments".'),E(!1),()=>{};for(;e.firstChild;)e.removeChild(e.firstChild);E(!0),C(null);let s=document.createElement("script");s.src="".concat(l,"/client.js"),s.async=!0,s.crossOrigin="anonymous",s.setAttribute("repo",t),s.setAttribute("issue-term",n),(null==r?void 0:r.trim())&&s.setAttribute("label",r.trim()),s.setAttribute("theme",k());let a=()=>{C("Comments failed to load. Ensure the repo exists (public), Issues are enabled, and the Utterances app has access."),E(!1)};s.addEventListener("error",a),e.appendChild(s);let o=window.setInterval(()=>{e.querySelector(c)&&(window.clearInterval(o),E(!1))},Math.max(50,v)),i=window.setTimeout(()=>{e.querySelector(c)||a()},Math.max(1e3,f));return()=>{s.removeEventListener("error",a),window.clearInterval(o),window.clearTimeout(i)}},[t,n,r,k,y,v,f]);return a.useEffect(()=>{if(L)return;let e=b.current;if(!e)return;let t=e.getBoundingClientRect();if(t.top<window.innerHeight&&t.bottom>=0){g(!0);return}let n=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(g(!0),n.disconnect())},{root:null,rootMargin:d,threshold:m});return n.observe(e),()=>n.disconnect()},[L,d,m]),a.useEffect(()=>{if(!L)return;let e=b.current,t=j(e);return()=>{if(null==t||t(),e)for(;e.firstChild;)e.removeChild(e.firstChild)}},[L,j,p.asPath]),a.useEffect(()=>{let e=null,t=null,n=0,r=e=>{cancelAnimationFrame(n),n=requestAnimationFrame(()=>{N(e?"github-dark":"github-light")})};if(i)(t=new MutationObserver(()=>{r(document.documentElement.classList.contains("dark"))})).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),r(document.documentElement.classList.contains("dark"));else if(window.matchMedia){var s;let t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>r(t.matches);null===(s=t.addEventListener)||void 0===s||s.call(t,"change",n),"addListener"in t&&"function"==typeof t.addListener&&t.addListener(n),e=()=>{var e;null===(e=t.removeEventListener)||void 0===e||e.call(t,"change",n),"removeListener"in t&&"function"==typeof t.removeListener&&t.removeListener(n)},r(t.matches)}return()=>{null==t||t.disconnect(),null==e||e(),cancelAnimationFrame(n)}},[i,N]),(0,s.jsxs)("section",{"aria-labelledby":"comments-title",className:["mt-16",h||""].join(" ").trim(),children:[(0,s.jsx)("h2",{id:"comments-title",className:"sr-only",children:"Comments"}),(0,s.jsx)("div",{ref:b,className:"min-h-[120px]"},p.asPath),(w||x)&&(0,s.jsxs)("p",{role:"status","aria-live":"polite",className:"mt-4 text-sm",children:[w&&!x&&(0,s.jsx)("span",{className:"text-[color:var(--color-on-secondary)/0.7]",children:"Loading comments..."}),x&&(0,s.jsx)("span",{className:"text-red-600",children:x})]}),(0,s.jsx)("noscript",{children:(0,s.jsx)("p",{className:"mt-4 text-sm text-[color:var(--color-on-secondary)/0.7]",children:"Comments require JavaScript. Please enable it to view and post."})})]})}}}]);
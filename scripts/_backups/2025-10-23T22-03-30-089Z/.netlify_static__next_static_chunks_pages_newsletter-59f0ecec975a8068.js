(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1533],{5679:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newsletter",function(){return s(4708)}])},4708:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),r=s(7294),o=s(9008),n=s.n(o),i=s(4750);async function l(e){let t=await fetch("/api/newsletter",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e})}),s=await t.json().catch(()=>({}));return t.ok&&(null==s?void 0:s.ok)?{ok:!0,message:String(s.message||"You're subscribed. Welcome!")}:{ok:!1,message:String((null==s?void 0:s.message)||"Subscription failed (HTTP ".concat(t.status,"). Please try again."))}}let c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function d(){let[e,t]=r.useState(""),[s,o]=r.useState({state:"idle"});async function d(s){s.preventDefault();let a=e.trim().toLowerCase();if(!c.test(a)){o({state:"error",message:"Please enter a valid email address."});return}o({state:"loading"});try{let e=await l(a);e.ok?(o({state:"success",message:e.message||"You're subscribed. Welcome!"}),t("")):o({state:"error",message:e.message||"Something went wrong. Please try again."})}catch(e){o({state:"error",message:"Network error. Please try again."})}}let u="success"===s.state||"error"===s.state?String(s.message):"";return(0,a.jsxs)(i.Z,{pageTitle:"Newsletter",hideCTA:!0,children:[(0,a.jsx)(n(),{children:(0,a.jsx)("meta",{name:"description",content:"Subscribe to Abraham of London updates and essays."})}),(0,a.jsx)("section",{className:"bg-white",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-16",children:[(0,a.jsxs)("header",{className:"mb-6 text-center",children:[(0,a.jsx)("h1",{className:"font-serif text-4xl font-semibold text-deepCharcoal",children:"Join the Newsletter"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-[color:var(--color-on-secondary)/0.7]",children:"Essays, event invitations, and project updates. No spam â€” ever."})]}),(0,a.jsxs)("form",{onSubmit:d,className:"mx-auto flex max-w-xl flex-col gap-3 rounded-2xl border border-lightGrey bg-warmWhite p-4 sm:flex-row sm:items-center sm:p-5",noValidate:!0,children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",inputMode:"email",autoComplete:"email",required:!0,placeholder:"you@example.com",value:e,onChange:e=>t(e.target.value),className:"flex-1 rounded-lg border border-lightGrey bg-white px-3 py-2 text-sm text-deepCharcoal placeholder:text-[color:var(--color-on-secondary)/0.5] focus:border-deepCharcoal focus:outline-none","aria-describedby":"newsletter-status"}),(0,a.jsx)("button",{type:"submit",disabled:"loading"===s.state,className:"rounded-full bg-forest px-5 py-2 text-sm font-semibold text-cream transition hover:bg-[color:var(--color-primary)/0.9] disabled:cursor-not-allowed disabled:opacity-60",children:"loading"===s.state?"Subscribing...":"Subscribe"})]}),("success"===s.state||"error"===s.state)&&(0,a.jsx)("p",{id:"newsletter-status",role:"status","aria-live":"polite",className:"success"===s.state?"mt-3 text-sm text-forest":"mt-3 text-sm text-red-600",children:u})]})})]})}},512:function(e,t,s){"use strict";t.Z=function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}}},function(e){e.O(0,[1664,4750,2888,9774,179],function(){return e(e.s=5679)}),_N_E=e.O()}]);
//components/Layout.tsximport*asReactfrom"react";import Headfrom"next/head";import Linkfrom"next/link";import dynamicfrom"next/dynamic";import { useRouter } from "next/router";import SocialFollowStripfrom"@/components/SocialFollowStrip";import StickyCTAfrom"@/components/StickyCTA";import FloatingTeaserCTAfrom"@/components/FloatingTeaserCTA";import { NAV } from "@/config/nav";import { siteConfig,absUrl } from "@/lib/siteConfig";constThemeToggle=dynamic(()=>import("@/components/ThemeToggle"),{ssr:false});export type LayoutProps={children:React.ReactNode;pageTitle?:string;hideSocialStrip?:boolean;footerVariant?:"light"|"dark";hideCTA?:boolean;hero?:React.ReactNode;};//FIX:Removed'async'becausethiscomponentusesReactHooks(useRouter,useState,useEffect).export defaultfunctionLayout({children,pageTitle,hideSocialStrip,footerVariant="light",hideCTA=false,hero,}:LayoutProps){constrouter=useRouter();const[open,setOpen]=React.useState(false);constfirstMobileLinkRef=React.useRef<HTMLAnchorElement|null>(null);consttitle=pageTitle?`${pageTitle}|${siteConfig.title}`:siteConfig.title;//Normalizecurrentpath(stripquery/hashandtrailingslash)constnormalize=(href:string)=>href.replace(/[?#].*$/,"").replace(/\/+$/,"")||"/";constisActive=(href:string)=>normalize(router.asPath)===normalize(href);//Lockbodyscroll+focusfirstitemindrawerReact.useEffect(()=>{constroot=document.documentElement;constprev=root.style.overflow||"";if(open){root.style.overflow="hidden";firstMobileLinkRef.current?.focus();}else{root.style.overflow=prev||"";}return()=>{root.style.overflow=prev||"";};},[open]);//ClosedraweronroutechangeReact.useEffect(()=>{consthandleRoute=()=>setOpen(false);router.events.on("routeChangeStart",handleRoute);return()=>router.events.off("routeChangeStart",handleRoute);},[router.events]);//JSON-LDconstsameAs=Array.from(newSet((siteConfig.socialLinks||[]).filter((s)=>s.external&&/^https?:\/\//i.test(s.href)).map((s)=>s.href)));constORG_JSONLD={"@context":"https://schema.org","@type":"Organization",name:siteConfig.title,url:siteConfig.siteUrl,logo:absUrl("/assets/images/logo/abraham-of-london-logo.svg"),...(sameAs.length?{sameAs}:{}),contactPoint:[{"@type":"ContactPoint",contactType:"CustomerSupport",email:siteConfig.email,areaServed:"GB",availableLanguage:["en"],},],};constNAV_JSONLD={"@context":"https://schema.org","@type":"SiteNavigationElement",name:"PrimaryNavigation",hasPart:NAV.map((n)=>({"@type":"WebPage",name:n.label,url:absUrl(n.href),})),};return(<><Head d><title>{title}</title><metaname="viewport"content="width=device-width,initial-scale=1"/><scripttype="application/ld+json"dangerouslySetInnerHTML={{__html:JSON.stringify(ORG_JSONLD)}}/><scripttype="application/ld+json"dangerouslySetInnerHTML={{__html:JSON.stringify(NAV_JSONLD)}}/></Head>{/*Skiplink*/}<a href="#main-content"className="sr-onlyfocus:not-sr-onlyfocus:fixedfocus:left-4focus:top-4focus:z-50focus:rounded-mdfocus:bg-whitefocus:px-3focus:py-2focus:shadowdark:focus:bg-[color:var(--color-secondary)]">Skiptocontent</a>{/*Header*/}<header className="stickytop-0z-[60]border-bborder-[color:var(--color-on-secondary)/0.1]bg-white/85backdrop-blursupports-[backdrop-filter]:bg-white/70dark:bg-[color:var(--color-secondary)]/80"><div className="mx-autoflexh-16max-w-7xlitems-centerjustify-betweenpx-4md:h-20">{/*Brand*/}<Link href="/"className="inline-flexitems-baselinegap-2"prefetch={false}><span className="font-seriftext-xlfont-semiboldtracking-widetext-deepCharcoalmd:text-2xldark:text-cream">{siteConfig.title}</span><span className="hiddentext-[10px]uppercasetracking-[0.25em]text-gray-500md:inline-block"aria-hidden="true">EST.MMXXIV</span></Link>{/*DesktopNav*/}<nav className="hiddenmd:block"aria-label="Primary"><ul className="flexitems-centergap-8">{NAV.map((item)=>{constactive=isActive(item.href);return(<likey={item.href}><Link href={item.href}aria-current={active?"page":undefined}prefetch={false}className={["grouprelativetext-smfont-mediumtransition-colors",active?"text-deepCharcoaldark:text-cream":"text-gray-700hover:text-deepCharcoaldark:text-gray-300dark:hover:text-cream",].join("")}>{item.label}<span className={["pointer-events-noneabsolute-bottom-1left-0h-[2px]transition-all",active?"w-fullbg-softGold":"w-0bg-transparentgroup-hover:w-full",].join("")}aria-hidden="true"/></Link></li>);})}</ul></nav>{/*Rightcontrols*/}<div className="flexitems-centergap-3"><div className="hiddenmd:block"><Link href="/contact"className="rounded-fullbg-softGoldpx-5py-2text-smfont-mediumtext-deepCharcoaltransitionhover:brightness-95focus:outline-nonefocus-visible:ring-2focus-visible:ring-softGold/40"prefetch={false}>Enquire</Link></div><ThemeToggle/>{/*MobileMenuButton*/}<buttontype="button"onClick={()=>setOpen((v)=>!v)}aria-expande d={open}aria-controls="mobile-nav"className="inline-flexitems-centerjustify-centerrounded-mdborderborder-gray-300p-2text-gray-700dark:text-gray-200md:hidden"><span className="sr-only">Togglenavigation</span>{!open?(<svg width="20"height="20"viewBox="002424"fill="none"aria-hidden="true"><path d="M46h16M412h16M418h16"stroke="currentColor"strokeWidth="2"/></svg>):(<svg width="20"height="20"viewBox="002424"fill="none"aria-hidden="true"><path d="M66l1212M186L618"stroke="currentColor"strokeWidth="2"/></svg>)}</button></div></div>{/*MobileDrawer*/}<divi d="mobile-nav"className={`md:hidden${open?"block":"hidden"}border-tborder-gray-200bg-whitedark:bg-black`}><nav className="mx-automax-w-7xlpx-4py-4"aria-label="Mobile"><ul className="gridgap-2">{NAV.map((item,idx)=>{constactive=isActive(item.href);return(<likey={item.href}><Link href={item.href}ref={idx===0?firstMobileLinkRef:undefined}onClick={()=>setOpen(false)}aria-current={active?"page":undefined}prefetch={false}className={["blockrounded-mdpx-2py-2text-basefont-medium",active?"bg-gray-100text-deepCharcoaldark:bg-gray-800dark:text-cream":"text-gray-800hover:bg-gray-50dark:text-gray-300dark:hover:bg-gray-700",].join("")}>{item.label}</Link></li>);})}{/*MobileCTA*/}<li className="pt-2"><Link href="/contact"onClick={()=>setOpen(false)}className="blockrounded-fullbg-softGoldpx-5py-2text-centertext-smfont-mediumtext-deepCharcoaltransitionhover:brightness-95"prefetch={false}>Enquire</Link></li></ul></nav></div></header>{/*SocialStrip*/}{!hideSocialStrip&&(<div className="border-bborder-gray-100bg-whitedark:bg-black/40"><div className="mx-automax-w-7xlpx-4py-2"><SocialFollowStrip/></div></div>)}{/*Page-levelhero*/}{hero?<divdata-layout-hero>{hero}</div>:null}{/*Main*/}<maini d="main-content"className="min-h-screenbg-whitedark:bg-black"style={{paddingBottom:"var(--sticky-cta-h,0px)"}}>{children}</main>{/*StickyCTAonverywidescreensonly*/}{!hideCTA&&(<div className="hidden2xl:block"><StickyCTAshowAfter={420}/></div>)}{/*FloatingteaserCTA*/}<FloatingTeaserCTA/>{/*Footer*/}<footer className={`border-t${footerVariant==="dark"?"bg-deepCharcoaltext-creamborder-white/10":"bg-whitetext-gray-700border-gray-200"}`}><div className="mx-automax-w-7xlpx-4py-12"><div className="gridgap-10md:grid-cols-3"><div><p className="font-seriftext-lgfont-semibold">{siteConfig.title}</p><p className="mt-2text-smleading-relaxed">Principledstrategy,writing,andventures—groundedinlegacyandfatherhood.</p></div><div><p className="text-smfont-semibold">Navigate</p><ul className="mt-3gridgap-2text-sm">{NAV.map((item)=>(<likey={item.href}><Link href={item.href}className="transitionhover:text-softGold"prefetch={false}>{item.label}</Link></li>))}</ul></div><div><p className="text-smfont-semibold">Contact&amp;Legal</p><ul className="mt-3gridgap-2text-sm"><li><a href={`mailto:${siteConfig.email}`}className="transitionhover:text-softGold">{siteConfig.email}</a></li><li><Link href="/contact"className="transitionhover:text-softGold"prefetch={false}>WorkWithMe</Link></li><li><Link href="/newsletter"className="transitionhover:text-softGold"prefetch={false}>Subscribe</Link></li><li><Link href="/privacy"className="transitionhover:text-softGold"prefetch={false}>PrivacyPolicy</Link></li><li><Link href="/terms"className="transitionhover:text-softGold"prefetch={false}>TermsofService</Link></li></ul></div></div><div className="mt-10border-tborder-gray-200pt-6text-centertext-xs">©{newDate().getFullYear()}{siteConfig.title}.Allrightsreserved.</div></div></footer></>);}

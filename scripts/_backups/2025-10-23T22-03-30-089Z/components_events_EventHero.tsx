//components/events/EventHero.tsximport*asReactfrom"react";import Imagefrom"next/image";type EventHeroProps={slug:string;title:string;date?:string|null;endDate?:string|null;location?:string|null;summary?:string|null;heroImage?:string|null;aspect?:"wide"|"book"|"square";fit?:"cover"|"contain";position?:"left"|"center"|"right";};function normalizeLocal(src?:string|null){if(!src)returnundefined;if(/^https?:\/\//i.test(src))returnsrc;//allowremotetooreturnsrc.startsWith("/")?src:`/${src.replace(/^\/+/,"")}`;}function useCover(slug:string,heroImage?:string|null){constlist=React.useMemo(()=>{constcands=[normalizeLocal(heroImage),`/assets/images/events/${slug}.webp`,`/assets/images/events/${slug}.jpg`,`/assets/images/events/${slug}.jpeg`,`/assets/images/events/${slug}.png`,`/assets/images/events/default-event-cover.jpg`,].filter(Boolean)asstring[];returnArray.from(newSet(cands));},[slug,heroImage]);const[i,setI]=React.useState(0);const src=list[i];const onError=React.useCallback(()=>{setI((x)=>(x+1<list.length?x+1:x));},[list.length]);return{src,onError};}function formatRange(start?:string|null,end?:string|null){if(!start)return"";consts=newDate(start);if(Number.isNaN(+s))return"";constlocale="en-GB";if(!end){constdatePart=newIntl.DateTimeFormat(locale,{day:"2-digit",month:"short",year:"numeric",}).format(s);consttimePart=newIntl.DateTimeFormat(locale,{hour:"2-digit",minute:"2-digit",}).format(s);return`${datePart}${timePart?`,${timePart}`:""}`;}conste=newDate(end);constsameDay=s.getFullYear()===e.getFullYear()&&s.getMonth()===e.getMonth()&&s.getDate()===e.getDate();constdayStr=newIntl.DateTimeFormat(locale,{day:"2-digit",month:"short",year:"numeric",}).format(s);consttimeStart=newIntl.DateTimeFormat(locale,{hour:"2-digit",minute:"2-digit",}).format(s);consttimeEn d=newIntl.DateTimeFormat(locale,{hour:"2-digit",minute:"2-digit",}).format(e);if(sameDay)return`${dayStr},${timeStart}–${timeEnd}`;constdayEn d=newIntl.DateTimeFormat(locale,{day:"2-digit",month:"short",year:"numeric",}).format(e);return`${dayStr},${timeStart}Ãƒ¢Ã¢â‚¬'${dayEnd},${timeEnd}`;}export defaultfunctionEventHero({slug,title,date,endDate,location,summary,heroImage,aspect="wide",fit="cover",position="center",}:EventHeroProps){const{src,onError}=useCover(slug,heroImage);constaspectClass=aspect==="square"?"aspect-[1/1]":aspect==="book"?"aspect-[2/3]":"aspect-[16/9]";constfitClass=fit==="contain"?"object-contain":"object-cover";constposClass=position==="left"?"object-left":position==="right"?"object-right":"object-center";constframePadding=fit==="contain"?"p-2sm:p-3md:p-4":"";constframeBg=fit==="contain"?"bg-warmWhite":"bg-transparent";constframeBorder=fit==="contain"?"borderborder-lightGrey/70":"borderborder-transparent";return(<section className="bg-white"><div className="mx-autogridmax-w-7xlgrid-cols-1items-centergap-8px-4py-10md:grid-cols-2md:gap-12"><div><p className="mb-2text-xsuppercasetracking-widesttext-[color:var(--color-on-secondary)/0.6]">ChathamRoomsavailable</p><h1 className="font-seriftext-4xlfont-semiboldtext-deepCharcoalsm:text-5xl">{title}</h1><div className="mt-3flexflex-wrapitems-centergap-3text-smtext-[color:var(--color-on-secondary)/0.7]">{date&&<timedateTime={date}>{formatRange(date,endDate)}</time>}{location&&(<><span aria-hidden>•</span><span>{location}</span></>)}</div>{summary&&<p className="mt-5max-w-prosetext-[color:var(--color-on-secondary)/0.85]">{summary}</p>}</div>{src&&(<div className={`relativew-fulloverflow-hiddenrounded-2xl${aspectClass}${frameBg}${framePadding}${frameBorder}shadow-card`}><Image src={src}alt={title}fill sizes="(max-width:768px)100vw,50vw"className={`${fitClass}${posClass}`}onError={onError}priority/></div>)}</div></section>);}

import*asReactfrom"react";import{motion}from"framer-motion";importLinkfrom"next/link";importclsxfrom"clsx";//---Types---exporttypeEventItem={id?:string;/**ISOdatestring(YYYY-MM-DD)orDate*/date:string|Date;title:string;location?:string;href?:string;};typeProps={events?:EventItem[];variant?:"light"|"dark";title?:string;emptyMessage?:string;/**Hidepastevents(default:true)*/hidePast?:boolean;/**Limitnumbershown*/max?:number;/**Localefordateformatting(default:en-GB)*/locale?:string;className?:string;};//---Constants&Utilities---constDEFAULT_EVENTS:EventItem[]=[{date:"2026-09-12",title:"StrategicLeadershipWorkshop",location:"London,UK",href:"/events/leadership-workshop",},{date:"2026-11-11",title:"Fathers&FuturesPanel:OnlineSession",location:"Online",href:"/events/fathers-and-futures",},];/***Safelyparsesadatestring/objectintoaDateobject.*@returnsDateobjectornullifparsingfails.*/functionparseDate(d:string|Date):Date|null{try{constdate=dinstanceofDate?d:newDate(d);returnisNaN(date.getTime())?null:date;}catch{returnnull;}}/***SafelyconvertsaDateobjecttoYYYY-MM-DDstring.*/constisoDate=(d:Date)=>d.toISOString().slice(0,10);//---Component---exportdefaultfunctionEventsSection({events=DEFAULT_EVENTS,variant="light",title="UpcomingEvents",emptyMessage="Noupcomingeventsscheduledatthistime.Pleasecheckbacklater!",hidePast=true,max,locale="en-GB",className,}:Props){//Ãƒ¢Ã…"…UPGRADE:Centralizedreferencedateforsafetyconsttoday=React.useMemo(()=>{constt=newDate();//Normalizetostartofdayforaccuratecomparisont.setHours(0,0,0,0);returnt;},[]);//Ãƒ¢Ã…"…UPGRADE:RobustDataFilteringandSortingconstlist=React.useMemo(()=>{constnormalized=(Array.isArray(events)?events:[]).map((e)=>{constdate=parseDate(e.date);//OnlyreturnobjectswithvalidDatereturndate?{...e,date}:null;}).filter(Boolean)as(Omit<EventItem,"date">&{date:Date})[];constfiltered=hidePast?normalized.filter((e)=>e.date>=today):normalized;//Sortchronologically(earliestfirst)filtered.sort((a,b)=>a.date.getTime()-b.date.getTime());//Applymaxlimitreturntypeofmax==="number"?filtered.slice(0,max):filtered;},[events,hidePast,max,today]);consthasEvents=list.length>0;constheadingId=React.useId();//Ãƒ¢Ã…"…UPGRADE:CleanedupvariantstylingdefinitionconstisDark=variant==="dark";conststyles=React.useMemo(()=>({heading:clsx("text-3xlmd:text-4xlfont-seriffont-semiboldtext-centermb-10",//Addedfont-serifisDark?"text-cream":"text-deepCharcoal"),card:clsx("rounded-2xlp-6shadow-xltransition-transformduration-300hover:scale-[1.01]",//AddedhovereffectisDark?"borderborder-white/10bg-white/10backdrop-blur-smtext-cream":"borderborder-black/5bg-whitetext-gray-900"),subText:clsx("text-sm",isDark?"text-[color:var(--color-on-primary)/0.7]":"text-gray-600"),locationText:clsx("mt-1text-base",isDark?"text-[color:var(--color-on-primary)/0.85]":"text-gray-700"),button:clsx("inline-flexitems-centergap-2mt-4px-4py-2rounded-fullfont-mediumtransitionduration-200",isDark?"bg-foresttext-creamhover:bg-emerald-700focus-visible:ring-emerald-400":"bg-foresttext-creamhover:bg-deepCharcoalfocus-visible:ring-[color:var(--color-on-secondary)/0.5]"),}),[isDark]);constfmt=React.useMemo(()=>newIntl.DateTimeFormat(locale,{day:"2-digit",month:"short",year:"numeric",}),[locale]);return(<sectionclassName={clsx("max-w-7xlmx-autopx-4py-16",className)}role="region"aria-labelledby={headingId}><motion.h2id={headingId}className={styles.heading}initial={{opacity:0,y:12}}whileInView={{opacity:1,y:0}}viewport={{once:true}}transition={{duration:0.5}}>{title}</motion.h2>{!hasEvents?(<pclassName={clsx("text-centeritalic",styles.subText)}>{emptyMessage}</p>):(<divclassName="gridgap-8md:grid-cols-2lg:grid-cols-3">{list.map((ev,i)=>{constdateLabel=fmt.format(ev.date);constlinkHref=ev.href??'#';//EnsureafallbackhrefforLinkreturn(<motion.articlekey={ev.id??`${ev.title}-${isoDate(ev.date)}`}className={styles.card}initial={{opacity:0,y:16}}whileInView={{opacity:1,y:0}}viewport={{once:true,amount:0.3}}transition={{duration:0.45,delay:i*0.08}}><divclassName={styles.subText}>{/*Ãƒ¢Ã…"…UPGRADE:Timecomponentandstrongsemanticstructure*/}<timedateTime={isoDate(ev.date)}className="font-semiboldtracking-wide">{dateLabel}</time></div><h3className="text-xlfont-semiboldmt-2">{/*Ãƒ¢Ã…"…UPGRADE:Wraptitleinlinkifhrefexistsforalargerclicktarget*/}{ev.href?(<Linkhref={linkHref}className="hover:underlinedecoration-softGold/60underline-offset-4">{ev.title}</Link>):(ev.title)}</h3>{ev.location&&(<pclassName={styles.locationText}><spanaria-hidden="true">Ãƒ°Ã…¸"Ã‚</span>{ev.location}</p>)}{ev.href&&(<Linkhref={linkHref}className={styles.button}aria-label={`Viewdetailsfortheevent:${ev.title}on${dateLabel}`}//Ãƒ¢Ã…"…UPGRADE:RichARIAlabel>Details{/*SVGArrowforvisualcue*/}<svgxmlns="http://www.w3.org/2000/svg"className="h-4w-4"fill="none"viewBox="002424"stroke="currentColor"strokeWidth={2}><pathstrokeLinecap="round"strokeLinejoin="round"d="M145l77m00l-77m7-7H3"/></svg></Link>)}</motion.article>);})}</div>)}</section>);}
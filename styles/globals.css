/* styles/globals.css â€” INSTITUTIONAL BASE (Tailwind + Brand Vars + Safety Fixes) */

/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
   0) Hard Safety Belt (prevents bleed / horizontal scroll from masks/transforms)
============================================================================= */
html,
body {
  overflow-x: hidden;
}

/* =============================================================================
   1) Brand Tokens (safe defaults; can be overridden by theme/provider)
   - Keep these simple: if tokens are missing, the site still renders cleanly.
============================================================================= */
:root {
  /* Brand base */
  --brand-obsidian: #000000;
  --brand-charcoal: #050505;
  --brand-cream: #fdfaf3;

  --brand-gold: #d4af37;
  --brand-amber: #f59e0b;

  /* UI RGB pipeline (Tailwind can consume rgb(var(--x)/alpha)) */
  --color-background: 0 0 0;
  --color-on-background: 253 250 243;
  --color-surface: 5 5 5;

  --color-primary: 245 158 11; /* amber-500 */
  --color-primary-light: 251 191 36; /* amber-400 */

  --ui-alpha-border: 255 255 255;

  /* Typography variables (hook these to next/font if you use it)
     If you don't, fallbacks in tailwind.config.js handle it. */
  --font-sans: ui-sans-serif;
  --font-mono: ui-monospace;
  --font-serif: ui-serif;
  --font-editorial: ui-serif;

  /* Legacy compatibility variables (your current tailwind config references these) */
  --font-family-sans: var(--font-sans);
  --font-family-mono: var(--font-mono);
  --font-family-serif: var(--font-serif);

  /* Radius + motion */
  --radius-xl: 1.5rem;
  --radius-2xl: 2rem;
}

/* Optional: dark mode token alignment (if you toggle .dark on <html>) */
.dark {
  --color-background: 0 0 0;
  --color-on-background: 253 250 243;
  --color-surface: 5 5 5;
  --ui-alpha-border: 255 255 255;
}

/* =============================================================================
   2) Base Layer: clean, readable, premium defaults
============================================================================= */
@layer base {
  html {
    text-rendering: optimizeLegibility;
    -webkit-text-size-adjust: 100%;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
  }

  body {
    background: var(--brand-obsidian);
    color: var(--brand-cream);
    font-family: var(--font-sans), Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }

  /* Better defaults for selection + focus */
  ::selection {
    background: rgba(245, 158, 11, 0.25);
    color: var(--brand-cream);
  }

  :focus-visible {
    outline: 2px solid rgba(245, 158, 11, 0.7);
    outline-offset: 3px;
    border-radius: 10px;
  }

  /* Links */
  a {
    text-underline-offset: 0.2em;
  }

  /* Media elements */
  img,
  video {
    max-width: 100%;
    height: auto;
  }
}

/* =============================================================================
   3) Utilities: subtle helpers for institutional polish
============================================================================= */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Prevents backdrop blur flicker in some browsers */
  .backdrop-fix {
    transform: translateZ(0);
    will-change: transform;
  }
}

/* =============================================================================
   4) Reduced motion (respect the user)
============================================================================= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}